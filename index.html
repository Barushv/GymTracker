<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hypertrophy Tracker</title>
  <meta name="theme-color" content="#0B0B0C" id="themeColor">
  <link rel="manifest" href="app.webmanifest">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="wrap">
    <header class="row header">
      <div>
        <h1>Hypertrophy Tracker <span class="pill">v4</span></h1>
        <div class="muted">Fercho & Andy • %1RM / RIR / TUT • Progresión S1–S4 • Editable 1RM • Backup/Restore</div>
      </div>
      <div class="toolbar">
        <div><label>Persona</label><select id="person"><option value="fercho">Fercho</option><option value="andy">Andy</option></select></div>
        <div><label>Día</label><select id="day"></select></div>
        <div><label>Semana</label><select id="week"><option value="1">Semana 1</option><option value="2">Semana 2</option><option value="3">Semana 3</option><option value="4">Semana 4</option></select></div>
        <div><label>Tema</label><select id="theme"><option value="emerald">Emerald</option><option value="teal">Teal</option><option value="indigo">Indigo</option><option value="rose">Rose</option><option value="amber">Amber</option></select></div>
        <div class="toolbar-buttons">
          <button id="btnExport">Exportar CSV</button>
          <button id="btnInstall" class="ghost" style="display:none">Instalar</button>
          <button id="btnSettings" class="ghost">⚙️ Ajustes</button>
          <button id="btnView" class="ghost">Vista: Tabla</button>
        </div>
      </div>
    </header>

    <section class="card" id="tableCard">
      <div id="planContainer"></div>
      <div class="foot">“Autoajuste” aparece en ejercicios sin 1RM precargado (usa RIR/tempo). Para ver kg, edita 1RM en ⚙️ Ajustes.</div>
    </section>

    <section class="row">
      <div class="card">
        <h2>Cardio (oxidación de grasa)</h2>
        <div id="cardioList"></div>
      </div>
      <div class="card">
        <h2>Mini-déficit (sin afectar pierna)</h2>
        <div id="deficitText" class="muted"></div>
        <ul class="muted tips">
          <li>Proteína: 1.8–2.2 g/kg/día</li>
          <li>Carbohidratos altos en pierna; moderados en upper y domingo</li>
          <li>Grasas ≥ 0.6 g/kg; monoinsaturadas</li>
          <li>Hidratación: 30–40 ml/kg (+500–1000 ml con HIIT/escalera)</li>
        </ul>
        <label style="margin-top:8px;display:block">Notas</label>
        <textarea id="notes" rows="4" placeholder="Apunta aquí ajustes de comida, sueño, recuperación…"></textarea>
      </div>
    </section>

    <section class="card" style="margin-top:12px">
      <h2>Domingo activo (sin glúteo)</h2>
      <div class="muted">LISS 35–45′ (caminadora pendiente o elíptica) + <b>core 8–12′</b> (Dead bug, Pallof press, plancha lateral). Opcional: escalera muy suave 10–15′ + movilidad.</div>
    </section>

    <div class="modal" id="modal">
      <div class="box">
        <div class="modal-head">
          <h2>Ajustes</h2>
          <button id="btnClose" class="ghost">Cerrar</button>
        </div>
        <div class="hr"></div>
        <div class="grid2">
          <div>
            <h3>1RM por persona</h3>
            <div class="help">Edita tus 1RM. Se guardan en el dispositivo. Afecta los rangos de “Carga objetivo”.</div>
            <div id="oneRmEditor" class="mt8"></div>
            <div class="row-actions">
              <button id="btnAdd1RM" class="ghost">Agregar ejercicio 1RM</button>
              <button id="btnReset1RM" class="ghost">Restablecer a valores por defecto</button>
            </div>
          </div>
          <div>
            <h3>Respaldo</h3>
            <div class="help">Descarga y carga un respaldo (.json) con 1RM, progresión y estado.</div>
            <div class="row-actions">
              <button id="btnBackup">Descargar respaldo</button>
              <input type="file" id="fileRestore" accept=".json" style="display:none">
              <button id="btnRestore" class="ghost">Restaurar desde archivo</button>
            </div>
            <div class="hr"></div>
            <div class="help">Migración automática: si existían datos guardados bajo “novia”, se trasladan a “andy”.</div>
          </div>
        </div>
      </div>
    </div>

    <footer class="muted foot-bottom">PWA v4: estructura separada, responsive real, “Andy” y migración de datos. Offline tras la primera carga.</footer>
  </div>
  <script type="module" src="js/app.js"></script>
</body>
</html>
